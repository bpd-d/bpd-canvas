{"version":3,"sources":["webpack://bpdCanvas/webpack/universalModuleDefinition","webpack://bpdCanvas/webpack/bootstrap","webpack://bpdCanvas/./src/core/functions.ts","webpack://bpdCanvas/./src/core/interfaces.ts","webpack://bpdCanvas/./src/impl/colors.ts","webpack://bpdCanvas/./src/core/mapper/setters.ts","webpack://bpdCanvas/./src/core/mapper/mapper.ts","webpack://bpdCanvas/./src/impl/mapper.ts","webpack://bpdCanvas/./src/impl/statics.ts","webpack://bpdCanvas/./src/impl/components/base.ts","webpack://bpdCanvas/./src/impl/components/image.ts","webpack://bpdCanvas/./src/impl/components/path.ts","webpack://bpdCanvas/./src/impl/components/rectangle.ts","webpack://bpdCanvas/./src/impl/components/text.ts","webpack://bpdCanvas/./src/impl/assistant.ts","webpack://bpdCanvas/./src/impl/paths.ts","webpack://bpdCanvas/./src/impl/properties.ts","webpack://bpdCanvas/./src/core/font.ts","webpack://bpdCanvas/./src/index.ts"],"names":[],"mappings":"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","file":"bpdCanvas.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bpdCanvas\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bpdCanvas\"] = factory();\n\telse\n\t\troot[\"bpdCanvas\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { CanvasPoint } from \"./interfaces\";\r\n\r\n/**\r\n * Checks whether value passed is equal to false\r\n * @param value value to check\r\n * @returns false only when argument passed is equal to false, true otherwise\r\n */\r\nexport function notFalse(value?: boolean) {\r\n    return value === false ? false : true;\r\n}\r\n\r\n/**\r\n * Checks whether value passed is equal to true\r\n * @param value value to check\r\n * @returns true only when argument passed is equal to true, false otherwise\r\n */\r\nexport function isTrue(value?: boolean) {\r\n    return value === true ? true : false;\r\n}\r\n\r\nexport function merge<T>(t1: T, t2: T): T {\r\n    return {\r\n        ...t1,\r\n        ...t2\r\n    }\r\n}\r\n\r\nexport function mergeWithInherits<T extends V, V>(input: T, ...ts: V[]): V {\r\n    if (ts.length === 1) {\r\n        return {\r\n            ...input,\r\n            ...ts[0]\r\n        };\r\n    }\r\n    return ts.reduce((res, t) => {\r\n        if (!t) {\r\n            return res;\r\n        }\r\n        return {\r\n            ...res,\r\n            ...t\r\n        }\r\n    }, { ...input });\r\n}\r\n\r\n\r\n// function isIterator<T>(obj: Iterable<T>) {\r\n//     return typeof obj[Symbol.iterator] === 'function';\r\n// }\r\n\r\n// function getIterator<T>(obj: Iterable<T>): Iterator<T> | null {\r\n//     return isIterator(obj) ? obj[Symbol.iterator]() : null;\r\n// }\r\n\r\n\r\n// function enumerate<T>(iterator: Iterator<T>, callback: (value: T, index: number) => void): void {\r\n//     let index = 0;\r\n//     let current = iterator.next();\r\n//     while (!current.done) {\r\n//         callback(current.value, index);\r\n//         index++;\r\n//         current = iterator.next();\r\n//     }\r\n// }\r\n\r\n// /**\r\n//  * Finds all indexes of items that passes condition\r\n//  * @param iterable object to find in\r\n//  * @param callback function that provides condition\r\n//  * @returns list of indexes found\r\n//  */\r\n// export function findAllIndexes<T>(iterable: Iterable<T>, callback: (value: T, index: number) => boolean): number[] {\r\n//     const result: number[] = [];\r\n//     const iterator = getIterator(iterable);\r\n//     if (!iterator) {\r\n//         return result;\r\n//     }\r\n//     enumerate(iterator, (value: T, index: number) => {\r\n//         if (callback(value, index)) {\r\n//             result.push(index)\r\n//         }\r\n//     })\r\n//     return result;\r\n// }\r\n\r\n\r\n/**\r\n * Returns an iterator that incerments value on each call\r\n * It goes from 1...200000 and resets\r\n */\r\nexport function* counter(): Iterator<number> {\r\n    let idx = 1;\r\n    while (true) {\r\n        let reset = yield idx++;\r\n        if (reset || idx > 200000) {\r\n            idx = 1;\r\n        }\r\n    }\r\n}\r\n\r\nexport function validator<T>(input: T | undefined, keys: (keyof T)[], callback: (objectName: string, objectType: string, value: any) => boolean): boolean {\r\n    if (!input) {\r\n        return false;\r\n    }\r\n    const keysCount = keys.length;\r\n    if (keysCount === 0) {\r\n        return true\r\n    }\r\n    let key: keyof T = keys[0];\r\n    for (let i = 0; i < keysCount; i++, key = keys[i]) {\r\n        const val = input[key] as any;\r\n        if (!callback(key.toString(), typeof input[key], val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * Converts point it string representation\r\n * @param point \r\n * @returns String representation of point in format of x: 0, y: 0 \r\n */\r\nexport function pointToString(point: CanvasPoint): string {\r\n    if (!point) {\r\n        return \"-\";\r\n    }\r\n    return `x:${point.x}, y:${point.y}`;\r\n}\r\n\r\n\r\n/**\r\n * Adjusts value to specified range\r\n * @param value value to be checked\r\n * @param min range minimum\r\n * @param max range maximum\r\n * @returns Value that is within the range\r\n */\r\nexport function adjust(value: number, min: number, max: number) {\r\n    return Math.round(Math.max(Math.min(max, value), 0));\r\n}\r\n\r\n/**\r\n * Adjusts range to 0..1.\r\n * If value is smaller than 1 then value stays\r\n * If value is bigger than 1 is treated as percentage and divided by 100\r\n * Value smaller than 0 is defaulted to 0\r\n * @param value \r\n * @returns value adjusted to 0..1 range\r\n */\r\nexport function adjustSmallRange(value: number): number {\r\n    value = Math.max(value, 0);\r\n    return value > 1 ? Math.min(value, 100) / 100 : value;\r\n}\r\n\r\n\r\n/**\r\n * Gets value of key from first or second object regarding which object this key exists on.\r\n * If both have key existing, first one is returned\r\n * @param key object property name\r\n * @param v1 first object\r\n * @param v2 second object\r\n * @returns found value or undefined\r\n */\r\nexport function getVal<V>(key: keyof V, v1: V, v2: V): V[keyof V] | undefined {\r\n    return v1[key] ?? v2[key];\r\n}\r\n\r\n/**\r\n * Inserts items at specific position in the collection.\r\n * When position is not provided or does not fit to collection range then items are appended to collection\r\n * @param collection collection\r\n * @param items items to be added\r\n * @param index? positions\r\n *  \r\n * @example insert([1,2,3], [5], 1)\r\n */\r\nexport function insert<T>(collection: T[], items: T[], index?: number) {\r\n    if (typeof index !== 'number' || index < 0 || index >= collection.length) {\r\n        collection.push(...items);\r\n        return;\r\n    }\r\n    collection.splice(index, 0, ...items)\r\n}","import { IMapper } from \"./mapper/interfaces\";\r\nimport { Mapper } from \"./mapper/mapper\";\r\n\r\nexport interface IStringable {\r\n    asString(): string;\r\n}\r\n\r\nexport interface ISetter<T> {\r\n    set(t: T): ISetter<T>\r\n}\r\n\r\nexport interface IGetter<T> {\r\n    get(): T;\r\n}\r\n\r\n\r\nexport interface AssistantOptions {\r\n    canvas: HTMLCanvasElement;\r\n    size?: CanvasObjectSize;\r\n    settings?: IObjectProperties;\r\n    alpha?: boolean;\r\n    desynchronized?: boolean;\r\n    useGlobalSettings?: boolean;\r\n}\r\n\r\nexport type TextAlign = \"left\" | \"right\" | \"center\" | \"start\" | \"end\";\r\nexport type TextBaseline = \"top\" | \"hanging\" | \"middle\" | \"alphabetic\" | \"ideographic\" | \"bottom\";\r\nexport type LineCap = \"butt\" | \"round\" | \"square\";\r\nexport type LineJoin = \"bevel\" | \"round\" | \"miter\";\r\n\r\nexport type PatternRepetition = \"repeat\" | 'repeat-x' | 'repeat-y' | 'no-repeat';\r\n\r\nexport interface IObjectProperties {\r\n    strokeStyle?: IObjectStyle;\r\n    fillStyle?: IObjectStyle;\r\n    strokeWidth?: number;\r\n    isFill?: boolean;\r\n    isStroke?: boolean;\r\n    font?: IStringable;\r\n    mitterLimit?: number;\r\n    lineCap?: LineCap;\r\n    lineJoin?: LineJoin;\r\n    lineDashOffset?: number;\r\n    lineDash?: number[];\r\n    textAlign?: TextAlign;\r\n    textBaseline?: TextBaseline;\r\n    shadowColor?: IObjectStyle;\r\n    shadowOffsetX?: number;\r\n    shadowOffsetY?: number;\r\n    shadowBlur?: number;\r\n}\r\n\r\nexport interface CanvasObjectSetup<T, V> {\r\n    context: T,\r\n    settings: V,\r\n    mapper: IMapper<V, T>;\r\n    //objectSetup?: K;\r\n    useGlobal: boolean;\r\n    key?: string;\r\n}\r\n\r\nexport interface IObjectStyle {\r\n    toStyle(): string | CanvasGradient | CanvasPattern;\r\n}\r\n\r\nexport interface RgbColorDefinition {\r\n    red?: number;\r\n    green?: number;\r\n    blue?: number;\r\n    alpha?: number;\r\n}\r\n\r\nexport interface HslColorDefinition {\r\n    hue?: number;\r\n    saturation?: number;\r\n    lightness?: number;\r\n    alpha?: number;\r\n}\r\n\r\nexport interface CanvasPatternDefinition {\r\n    source?: CanvasImageSource;\r\n    repeat?: PatternRepetition;\r\n}\r\n\r\nexport interface CanvasObjectSize {\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nexport interface CanvasPoint {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport interface IIdentifyable {\r\n    id: string;\r\n}\r\n\r\nexport interface IKey<T> {\r\n    getKey(): T;\r\n}\r\n\r\nexport interface PathElementOptions<T> {\r\n    key?: string;\r\n    init?: T;\r\n}\r\n\r\nexport interface TextSetup {\r\n    text?: string;\r\n    position?: CanvasPoint;\r\n}\r\n\r\nexport interface CanvasImageSetup {\r\n    source?: CanvasImageSource;\r\n    position?: CanvasPoint;\r\n    imageSlice?: CanvasObjectCoordinates;\r\n    desitnationCoords?: CanvasObjectCoordinates;\r\n}\r\n\r\nexport interface CanvasObjectCoordinates extends CanvasObjectSize, CanvasPoint { };\r\n\r\nexport interface ArcOptions {\r\n    startAngle: number;\r\n    endAngle: number;\r\n    radius: number;\r\n}\r\n\r\nexport interface CurveOptions {\r\n    radius?: number;\r\n    corner?: CanvasPoint;\r\n    end?: CanvasPoint;\r\n}\r\n\r\nexport interface BezierCurveOptions {\r\n    controlPoint?: CanvasPoint;\r\n    controlPoint2?: CanvasPoint;\r\n    end?: CanvasPoint;\r\n}\r\n\r\nexport interface QuadraticCurveOptions {\r\n    controlPoint?: CanvasPoint;\r\n    end?: CanvasPoint;\r\n}\r\n\r\nexport interface EllipseOptions {\r\n    rotation?: number;\r\n    radiusX?: number;\r\n    radiusY?: number;\r\n    startAngle?: number;\r\n    endAngle?: number;\r\n}\r\n\r\nexport interface ICanvasDrawable extends IIdentifyable {\r\n    draw(): void;\r\n    getRect(): CanvasObjectCoordinates;\r\n}\r\n\r\nexport interface IFillable {\r\n    fill(flag?: boolean): void;\r\n}\r\n\r\nexport interface IStrokable {\r\n    stroke(flag?: boolean): void;\r\n}\r\n\r\nexport interface ICollectionOperator<T, V> {\r\n    first(collection: T[], t: V): T | null;\r\n    delete(collection: T[], t: V): void;\r\n    set(collection: T[], t: V, element: T): void;\r\n}\r\n\r\nexport interface IPathElement extends IIdentifyable, IKey<string> {\r\n    build(context: CanvasRenderingContext2D, from: CanvasPoint): CanvasPoint;\r\n}\r\n\r\nexport class ErrorBase extends Error {\r\n    constructor(name: string, message?: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n        this.name = name;\r\n    }\r\n}\r\n\r\nexport class InitializationError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"InitializationError\", message)\r\n    }\r\n}\r\n\r\nexport class MissingKeyException extends ErrorBase {\r\n    constructor(type: string, message?: string) {\r\n        super(\"MissingKeyException\", `[${type}] ${message ?? \"\"}`)\r\n    }\r\n}\r\n\r\nexport class IteratorException extends ErrorBase {\r\n    constructor(type: string, message?: string) {\r\n        super(\"IteratorException\", `[${type}] ${message ?? \"\"}`)\r\n    }\r\n}\r\n\r\nexport class ElementException extends ErrorBase {\r\n    constructor(type: string, id: string, message?: string) {\r\n        super(\"ElementException\", `[${type}][${id}] ${message ?? \"\"}`)\r\n    }\r\n}\r\n\r\nexport class SetterException extends ErrorBase {\r\n    constructor(type: string, message?: string) {\r\n        super(\"SetterException\", `[${type}] ${message ?? \"\"}`)\r\n    }\r\n}\r\n\r\nexport class EnumSetterException extends SetterException {\r\n    constructor(message?: string) {\r\n        super(\"Enum\", `${message ?? \"\"}`)\r\n    }\r\n}\r\n\r\nexport class MapperExecption extends ErrorBase {\r\n    constructor(key: string, message: string) {\r\n        super(\"MapperExecption\", `Error occured on [${key}]: ${message}`)\r\n    }\r\n}\r\n\r\nexport class CounterError extends ErrorBase {\r\n    constructor(name: string, message: string) {\r\n        super(\"CounterError\", `Counter [${name}]: ${message}`)\r\n    }\r\n}","import { adjust, adjustSmallRange, merge } from \"../core/functions\";\r\nimport { CanvasPoint, IStringable, CanvasObjectCoordinates, CanvasObjectSize, HslColorDefinition, IObjectStyle, RgbColorDefinition, CanvasPatternDefinition, ErrorBase, ISetter } from \"../core/interfaces\";\r\n\r\nexport interface ColorConverter<T> {\r\n    (t: T): string;\r\n}\r\n\r\nexport class StringColorBase<T> implements IStringable, IObjectStyle {\r\n    protected _color: T;\r\n    private _converter: ColorConverter<T>;\r\n    constructor(converter: ColorConverter<T>, init: T) {\r\n        this._converter = converter;\r\n        this._color = init;\r\n\r\n    }\r\n\r\n    set(color: T): void {\r\n        this._color = {\r\n            ...this._color,\r\n            ...color\r\n        }\r\n    }\r\n\r\n    get(): T {\r\n        return this._color;\r\n    }\r\n\r\n    asString(): string {\r\n        return this._converter(this._color);\r\n    }\r\n\r\n    toStyle(): string | CanvasGradient {\r\n        return this.asString();\r\n    }\r\n}\r\n\r\n/**\r\n * Creates instance of object style that accepts all kind of colors in string format\r\n */\r\nexport class Color extends StringColorBase<string> {\r\n    constructor(name: string) {\r\n        super((name: string) => {\r\n            return name;\r\n        }, name);\r\n    }\r\n\r\n    set(color: string) {\r\n        this._color = color;\r\n    }\r\n}\r\n\r\n/**\r\n * Creates instance of style object building a RGB color\r\n */\r\nexport class RgbColor extends StringColorBase<RgbColorDefinition> {\r\n    constructor(color: RgbColorDefinition) {\r\n        super((color: RgbColorDefinition) => {\r\n            const c: RgbColorDefinition = {\r\n                red: adjust(valueOrDefault(color.red, 0), 0, 255),\r\n                green: adjust(valueOrDefault(color.green, 0), 0, 255),\r\n                blue: adjust(valueOrDefault(color.blue, 0), 0, 255),\r\n                alpha: adjustSmallRange(valueOrDefault(color.alpha, 1))\r\n            };\r\n            return `rgba(${c.red},${c.green},${c.blue},${c.alpha})`;\r\n        }, color);\r\n    }\r\n\r\n    setRed(value: number): void {\r\n        this._color.red = value;\r\n    }\r\n\r\n    setGreen(value: number): void {\r\n        this._color.green = value;\r\n    }\r\n\r\n    setBlue(value: number): void {\r\n        this._color.blue = value;\r\n    }\r\n\r\n    setAlpha(value: number) {\r\n        this._color.alpha = value;\r\n    }\r\n\r\n    fromHex(color: string) {\r\n        const val = parseHexToRgba(color);\r\n        if (val) {\r\n            this.set(val)\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Creates instance of style object building a HSL color\r\n */\r\nexport class HslColor extends StringColorBase<HslColorDefinition> {\r\n    constructor(color: HslColorDefinition) {\r\n        super((color: HslColorDefinition) => {\r\n            const c: HslColorDefinition = {\r\n                hue: adjust(valueOrDefault(color.hue, 0), 0, 360),\r\n                saturation: adjust(valueOrDefault(color.saturation, 0), 0, 100),\r\n                lightness: adjust(valueOrDefault(color.lightness, 0), 0, 100),\r\n                alpha: adjustSmallRange(valueOrDefault(color.alpha, 1))\r\n            };\r\n            return `hsla(${c.hue},${c.saturation}%,${c.lightness}%,${c.alpha})`;\r\n        },\r\n            color);\r\n    }\r\n\r\n    setHue(value: number): void {\r\n        this._color.hue = value;\r\n    }\r\n\r\n    setSaturation(value: number): void {\r\n        this._color.saturation = value;\r\n    }\r\n\r\n    setLightness(value: number): void {\r\n        this._color.lightness = value;\r\n    }\r\n\r\n    setAlpha(value: number) {\r\n        this._color.alpha = value;\r\n    }\r\n}\r\n\r\n/**\r\n * Creates instance of object styles that allows to build linear gradient\r\n */\r\nexport class CanvasLinearGradientColor implements IObjectStyle {\r\n    private _colors: Map<number, IStringable>;\r\n    private _context: CanvasRenderingContext2D;\r\n    private _startingPoint: CanvasPoint;\r\n    private _size: CanvasObjectSize;\r\n\r\n    constructor(context: CanvasRenderingContext2D, options?: CanvasObjectCoordinates) {\r\n        this._context = context;\r\n        this._colors = new Map();\r\n        this._size = {\r\n            height: 0,\r\n            width: 0\r\n        };\r\n        this._startingPoint = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n\r\n        if (options) {\r\n            this.setPosition(options);\r\n            this.setSize(options)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds color to map with specific offset\r\n     * @param offset \r\n     * @param color \r\n     */\r\n    addColor(offset: number, color: IStringable) {\r\n        this._colors.set(offset, color);\r\n    }\r\n\r\n    /**\r\n     * Removes color from map with specific offset\r\n     * @param offset color offset\r\n     * @returns whether operation succeeded\r\n     */\r\n    removeColor(offset: number): boolean {\r\n        return this._colors.delete(offset);\r\n    }\r\n\r\n    /**\r\n     * Clears color map\r\n     */\r\n    clearColors() {\r\n        this._colors.clear();\r\n    }\r\n\r\n    /**\r\n     * Sets gradient position\r\n     * @param point \r\n     */\r\n    setPosition(point: CanvasPoint) {\r\n        const { x, y } = point;\r\n        this._startingPoint = {\r\n            x, y\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets gradient size\r\n     * @param size \r\n     */\r\n    setSize(size: CanvasObjectSize) {\r\n        const { width, height } = size;\r\n        this._size = {\r\n            width,\r\n            height\r\n\r\n        }\r\n    }\r\n\r\n    toStyle(): string | CanvasGradient {\r\n        const gradient = this._context.createLinearGradient(this._startingPoint.x, this._startingPoint.y, this._size.width, this._size.height);\r\n        this._colors.forEach((value: IStringable, key: number) => {\r\n            const offset = adjustSmallRange(key);\r\n            gradient.addColorStop(offset, value.asString());\r\n        })\r\n        return gradient;\r\n    }\r\n}\r\n\r\nexport class CanvasSourcePattern implements IObjectStyle, ISetter<CanvasPatternDefinition> {\r\n    private _context: CanvasRenderingContext2D;\r\n    private _definition: CanvasPatternDefinition;\r\n    constructor(context: CanvasRenderingContext2D, definition?: CanvasPatternDefinition) {\r\n        this._context = context;\r\n        this._definition = definition ?? {};\r\n    }\r\n\r\n    set(t: CanvasPatternDefinition): ISetter<CanvasPatternDefinition> {\r\n        merge(this._definition, t);\r\n        return this;\r\n    }\r\n\r\n\r\n    toStyle(): string | CanvasGradient | CanvasPattern {\r\n        if (!this._definition || !this._definition.source) {\r\n            throw new ErrorBase(\"CanvasImagePatternError\", \"Cannot create pattern, source is missing\")\r\n        }\r\n        const pattern = this._context.createPattern(this._definition.source, this._definition.repeat ?? \"\");\r\n        if (!pattern) {\r\n            throw new ErrorBase(\"CanvasImagePatternError\", \"Pattern was not created\")\r\n        }\r\n        return pattern;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunction valueOrDefault<T>(value: T | undefined, defaultValue: T): T {\r\n    return value ?? defaultValue;\r\n}\r\n\r\nfunction fromHex(hex: string): number {\r\n    return parseInt(hex, 16);\r\n}\r\n\r\nfunction parseHexToRgba(value: string): RgbColorDefinition | null {\r\n    const str = value.startsWith('#') ? value.substring(1) : value;\r\n    const len = str.length;\r\n    const callback = rgbParsersMap.get(len);\r\n    return callback ? callback(str) : null;\r\n\r\n\r\n}\r\n\r\nconst rgbParsersMap = new Map<number, (v: string) => RgbColorDefinition>([\r\n    [1, oneHexToRgba],\r\n    [3, threeHexToRgba],\r\n    [6, sixToRgba],\r\n    [8, eightToRgba]\r\n])\r\n\r\n/**\r\n * Helper function that parses single character string to RGB color space\r\n * @param value single character string\r\n */\r\nfunction oneHexToRgba(value: string): RgbColorDefinition {\r\n    const v = fromHex(value + value);\r\n    return {\r\n        red: v,\r\n        green: v,\r\n        blue: v,\r\n        alpha: 1\r\n    }\r\n}\r\n\r\n/**\r\n * Helper function that parses three character string to RGB color space\r\n * @param value three character string\r\n */\r\nfunction threeHexToRgba(value: string): RgbColorDefinition {\r\n    return {\r\n        red: fromHex(value[0]),\r\n        green: fromHex(value[1]),\r\n        blue: fromHex(value[2]),\r\n        alpha: 1\r\n    }\r\n}\r\n\r\n/**\r\n * Helper function that parses six character string to RGB color space\r\n * @param value six character string\r\n */\r\nfunction sixToRgba(value: string): RgbColorDefinition {\r\n    return {\r\n        red: fromHex(value.substr(0, 2)),\r\n        green: fromHex(value.substr(2, 2)),\r\n        blue: fromHex(value.substr(4, 2)),\r\n        alpha: 1\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Helper function that parses eight character string to RGB color space\r\n * @param value eight character string\r\n */\r\nfunction eightToRgba(value: string): RgbColorDefinition {\r\n    return {\r\n        ...sixToRgba(value),\r\n        alpha: fromHex(value.substr(6, 2))\r\n    }\r\n}","import { IObjectStyle, IStringable, SetterException } from \"../interfaces\";\r\nimport { MapSetter } from \"./interfaces\";\r\n\r\nconst boolStringOptions: string[] = ['y', 't', 'true', 'yes'];\r\n\r\nexport function baseSet<V>(destination: V, key: keyof V, value: any) {\r\n    if (typeof destination[key] !== 'function' && typeof value !== 'function') {\r\n        destination[key] = value;\r\n    }\r\n}\r\n\r\nexport function styleSetter<T>(): MapSetter<T> {\r\n    return {\r\n        set: <T>(destination: T, key: keyof T, value: any) => {\r\n            baseSet(destination, key, (<IObjectStyle>value).toStyle());\r\n        }\r\n    }\r\n}\r\n\r\nexport function boolSetter<T>(): MapSetter<T> {\r\n    return {\r\n        set: <T>(destination: T, key: keyof T, value: any) => {\r\n            let resVal = false;\r\n            switch (typeof value) {\r\n                case 'boolean':\r\n                    resVal = value;\r\n                    break;\r\n                case 'number':\r\n                    resVal = value > 0;\r\n                    break;\r\n                case 'string':\r\n                    resVal = boolStringOptions.includes(value.toLowerCase());\r\n                    break;\r\n            }\r\n            baseSet(destination, key, resVal);\r\n        }\r\n    }\r\n}\r\n\r\nexport function numberSetter<T>(parser: 'float' | 'integer', defaultValue?: number): MapSetter<T> {\r\n    const callback = parser === 'float' ? parseFloat : parseInt;\r\n    return {\r\n        set: <T>(destination: T, key: keyof T, value: any) => {\r\n            const parsed = callback(value);\r\n            if (isNaN(parsed)) {\r\n                if (!defaultValue) {\r\n                    throw new SetterException(parser, \"Value is not a number\")\r\n                }\r\n                baseSet(destination, key, defaultValue)\r\n                return\r\n            }\r\n            baseSet(destination, key, parsed)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function stringableSetter<T>(): MapSetter<T> {\r\n    return {\r\n        set: <T>(destination: T, key: keyof T, value: any) => {\r\n\r\n            if (typeof value === 'string') {\r\n                baseSet(destination, key, value);\r\n                return;\r\n            }\r\n            baseSet(destination, key, (<IStringable>value).asString());\r\n        }\r\n    }\r\n}\r\n\r\nexport function enumSetter<T, V>(expected: T[], defaultValue?: T): MapSetter<V> {\r\n    return {\r\n        set: <V>(destination: V, key: keyof V, value: any) => {\r\n            if (expected.includes(value)) {\r\n                baseSet(destination, key, value)\r\n                return;\r\n            }\r\n            if (defaultValue) {\r\n                baseSet(destination, key, defaultValue)\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { MapperExecption } from \"../interfaces\";\r\nimport { IMapper, MapItem } from \"./interfaces\";\r\nimport { baseSet } from \"./setters\";\r\n\r\nexport class Mapper<T, V> implements IMapper<T, V> {\r\n    private _map: MapItem<T, V>[];\r\n    constructor(map: MapItem<T, V>[]) {\r\n        this._map = map;\r\n    }\r\n\r\n    map(destination: V, inner: T[], excludes?: string[]) {\r\n        const excl = excludes ?? [];\r\n        this._map.forEach(item => {\r\n            const key = item.key.toString();\r\n            if (excl.includes(key)) {\r\n                return;\r\n            }\r\n            const val = getVal(item.key, ...inner)\r\n            if (val) {\r\n                // In case where key is the same in both objects - set only key\r\n                const key: keyof V = item.mapTo ?? <any>item.key;\r\n                if (item.setter) {\r\n                    item.setter.set(destination, key, val)\r\n                    return;\r\n                }\r\n                try {\r\n                    baseSet(destination, key, val);\r\n                } catch (e) {\r\n                    throw new MapperExecption(key + \"\", e.message);\r\n                }\r\n\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\nfunction getVal<V>(key: keyof V, ...vs: V[]): V[keyof V] | undefined {\r\n    const len = vs.length\r\n    if (len === 0) {\r\n        return undefined;\r\n    }\r\n    for (let i = 0; i < len; i++) {\r\n        const inst = vs[i][key];\r\n        if (is(inst)) {\r\n            return inst;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nfunction is(val: any): boolean {\r\n    return typeof val !== 'undefined' && val !== null;\r\n}\r\n","import { IObjectProperties } from \"../core/interfaces\";\r\nimport { MapSetter } from \"../core/mapper/interfaces\";\r\nimport { Mapper } from \"../core/mapper/mapper\";\r\nimport { styleSetter, numberSetter, stringableSetter, enumSetter } from \"../core/mapper/setters\";\r\n\r\nexport function lineDashSetter(): MapSetter<CanvasRenderingContext2D> {\r\n    return {\r\n        set(destination: CanvasRenderingContext2D, key: string, value: any) {\r\n            if (Array.isArray(value)) {\r\n                destination.setLineDash(value);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function getMapperDefinition(): Mapper<IObjectProperties, CanvasRenderingContext2D> {\r\n    return new Mapper([\r\n        { key: \"strokeStyle\", setter: styleSetter() },\r\n        { key: \"fillStyle\", setter: styleSetter() },\r\n        { key: \"strokeWidth\", mapTo: 'lineWidth', setter: numberSetter('float') },\r\n        { key: \"font\", setter: stringableSetter() },\r\n        { key: \"mitterLimit\", setter: numberSetter('integer') },\r\n        { key: \"lineCap\", setter: enumSetter([\"butt\", \"round\", \"square\"], 'square') },\r\n        { key: \"lineJoin\", setter: enumSetter([\"bevel\", \"round\", \"miter\"], 'miter') },\r\n        { key: \"lineDashOffset\", setter: numberSetter('integer') },\r\n        { key: \"lineDash\", setter: lineDashSetter() },\r\n        { key: \"textAlign\", setter: enumSetter([\"left\", \"right\", \"center\", \"start\", \"end\"], 'right') },\r\n        { key: \"textBaseline\", setter: enumSetter([\"top\", \"hanging\", \"middle\", \"bottom\", \"alphabetic\", \"ideographic\"], 'alphabetic') },\r\n        { key: \"shadowColor\", setter: styleSetter() },\r\n        { key: \"shadowOffsetX\", setter: numberSetter('float') },\r\n        { key: \"shadowOffsetY\", setter: numberSetter('float') },\r\n        { key: \"shadowBlur\", setter: numberSetter('float') },\r\n    ]);\r\n}","import { counter } from \"../core/functions\";\r\nimport { IteratorException } from \"../core/interfaces\";\r\n\r\nexport const angle360: number = Math.PI * 2;\r\n\r\nconst counters: Map<string, Iterator<number>> = new Map([\r\n    ['line', counter()],\r\n    ['rect', counter()],\r\n    ['path', counter()],\r\n    ['curve', counter()],\r\n    ['text', counter()],\r\n    ['ellipse', counter()],\r\n    ['image', counter()],\r\n]);\r\n\r\nexport function createKey(counter: string, alternate?: string): string {\r\n    const iterator = counters.get(counter);\r\n    if (!iterator) {\r\n        throw new IteratorException(counter, \"Iterator for counter has not been found\");\r\n    }\r\n    const entry = iterator.next();\r\n    if (entry.done) {\r\n        throw new IteratorException(counter, \"Iterator is done\");\r\n    }\r\n    return `${alternate ?? counter}_${entry.value}`\r\n}\r\n\r\n\r\n","import { merge, notFalse } from \"../../core/functions\";\r\nimport { IFillable, IStrokable, IIdentifyable, IKey, IObjectProperties, CanvasObjectSetup } from \"../../core/interfaces\";\r\nimport { IMapper } from \"../../core/mapper/interfaces\";\r\nimport { createKey } from \"../statics\";\r\n\r\nclass ElementBase {\r\n    _context: CanvasRenderingContext2D\r\n    constructor(context: CanvasRenderingContext2D) {\r\n        this._context = context;\r\n    }\r\n}\r\n\r\n\r\nexport class CanvasObjectBase<T> extends ElementBase implements IFillable, IStrokable, IIdentifyable, IKey<string> {\r\n    protected _settings: IObjectProperties;\r\n    protected _global: IObjectProperties;\r\n    protected _mapper: IMapper<IObjectProperties, CanvasRenderingContext2D>;\r\n    protected _objectSetup: T;\r\n    private _useGlobalSettings: boolean;\r\n    id: string;\r\n    constructor(setup: CanvasObjectSetup<CanvasRenderingContext2D, IObjectProperties>, init: T, counter: string) {\r\n        super(setup.context);\r\n        this._global = setup.settings;\r\n        this._settings = {\r\n            ...this._global\r\n        }\r\n        this._useGlobalSettings = setup.useGlobal;\r\n        this._mapper = setup.mapper;\r\n        this._objectSetup = init;\r\n        this.id = setup.key ?? createKey(counter);\r\n    }\r\n\r\n    set(objectSetup: T) {\r\n        if (!this._objectSetup) {\r\n            this._objectSetup = {\r\n                ...objectSetup\r\n            }\r\n            return this;\r\n        }\r\n        merge(this._objectSetup, objectSetup);\r\n        return this;\r\n    }\r\n\r\n    fill(flag?: boolean) {\r\n        this._settings.isFill = notFalse(flag);\r\n        return this;\r\n    }\r\n\r\n    stroke(flag?: boolean) {\r\n        this._settings.isStroke = notFalse(flag);\r\n        return this;\r\n    }\r\n\r\n    setSettings(settings: IObjectProperties) {\r\n        this._settings = merge(this._settings, settings);\r\n        return this;\r\n    }\r\n\r\n    getKey(): string {\r\n        return this.id;\r\n    }\r\n\r\n    protected drawOptions() {\r\n        if (this._settings.isFill) {\r\n            this._context.fill();\r\n        }\r\n\r\n        if (this._settings.isStroke) {\r\n            this._context.stroke();\r\n        }\r\n    }\r\n\r\n    protected setStyles(excludedKeys?: string[]) {\r\n        const settings = [this._settings];\r\n        if (this._useGlobalSettings) {\r\n            settings.push(this._global)\r\n        }\r\n        this._mapper.map(this._context, settings, excludedKeys)\r\n    }\r\n}","import { CanvasImageSetup, CanvasObjectCoordinates, CanvasObjectSetup, ICanvasDrawable, IObjectProperties } from \"../../core/interfaces\";\r\nimport { CanvasObjectBase } from \"./base\";\r\n\r\n/**\r\n * Creates instance of Image drawable that draws an image on the canvas\r\n */\r\nexport class CanvasImage extends CanvasObjectBase<CanvasImageSetup> implements ICanvasDrawable {\r\n    constructor(setup: CanvasObjectSetup<CanvasRenderingContext2D, IObjectProperties>, init?: CanvasImageSetup) {\r\n        super(setup, init ?? {}, 'image');\r\n        if (!this._objectSetup) {\r\n            this._objectSetup = {};\r\n        }\r\n    }\r\n\r\n    draw() {\r\n\r\n        if (!this._objectSetup.source) {\r\n            return;\r\n        }\r\n        this.setStyles();\r\n        // Draw whole image\r\n        if (this._objectSetup.position) {\r\n            this._context.drawImage(this._objectSetup.source, this._objectSetup.position.x, this._objectSetup.position.y);\r\n            return;\r\n        }\r\n        // Draw a slice or a scaled image\r\n        if (this._objectSetup.imageSlice && this._objectSetup.desitnationCoords) {\r\n            this._context.drawImage(this._objectSetup.source,\r\n                this._objectSetup.imageSlice.x, this._objectSetup.imageSlice.y, this._objectSetup.imageSlice.width, this._objectSetup.imageSlice.height,\r\n                this._objectSetup.desitnationCoords.x, this._objectSetup.desitnationCoords.y, this._objectSetup.desitnationCoords.width, this._objectSetup.desitnationCoords.height,\r\n            )\r\n        }\r\n    }\r\n\r\n    getRect(): CanvasObjectCoordinates {\r\n        const w = <number>this._objectSetup.source?.width ?? 0;\r\n        const h = <number>this._objectSetup.source?.height ?? 0;\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            width: w,\r\n            height: h\r\n        }\r\n    }\r\n}","import { insert, notFalse } from \"../../core/functions\";\r\nimport { CanvasPoint, ICanvasDrawable, IPathElement, CanvasObjectSetup, IObjectProperties, ElementException, ICollectionOperator, CanvasObjectCoordinates } from \"../../core/interfaces\";\r\nimport { CanvasObjectBase } from \"./base\";\r\n\r\n/** \r\n * Draws path on canvas. Path always consists of path elements\r\n */\r\nexport class CanvasPath extends CanvasObjectBase<CanvasPoint> implements ICanvasDrawable {\r\n    public _isClosePath: boolean;\r\n    public _moveBeforeBuild: boolean;\r\n    private _paths: IPathElement[];\r\n    constructor(setup: CanvasObjectSetup<CanvasRenderingContext2D, IObjectProperties>, init?: CanvasPoint) {\r\n        super(setup, init ?? { x: -1, y: -1 }, 'path');\r\n        // for path set stroke to true by default regardless of globals\r\n        this._settings.isStroke = true;\r\n        this._isClosePath = false;\r\n        this._moveBeforeBuild = true;\r\n        this._paths = [];\r\n    }\r\n\r\n    from(point: CanvasPoint) {\r\n        this._objectSetup = {\r\n            ...point\r\n        }\r\n        return this;\r\n    }\r\n\r\n    add(...elements: IPathElement[]) {\r\n        insert(this._paths, elements);\r\n        return this;\r\n    }\r\n\r\n    doNotMoveBeforeBuild() {\r\n        this._moveBeforeBuild = false;\r\n        return this;\r\n    }\r\n\r\n    get(index: number): IPathElement | null {\r\n        if (index > -1 && index < this._paths.length) {\r\n            return this._paths[index];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    delete(key: number) {\r\n        if (!key) {\r\n            return;\r\n        }\r\n        this._paths.splice(key, 1);\r\n    }\r\n\r\n    insertAt(index: number, ...paths: IPathElement[]) {\r\n        insert(this._paths, paths, index);\r\n        return this;\r\n    }\r\n\r\n    setAt(index: number, element: IPathElement) {\r\n        if (index >= 0 && index < this._paths.length) {\r\n            this._paths[index] = element;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    close(flag?: boolean) {\r\n        this._isClosePath = notFalse(flag);\r\n    }\r\n\r\n    draw(): void {\r\n        if (!this._objectSetup) {\r\n            return;\r\n        }\r\n        this._context.beginPath();\r\n        this.setStyles();\r\n        let startPoint = this._objectSetup;\r\n        try {\r\n            if (this._moveBeforeBuild)\r\n                this._context.moveTo(startPoint.x, startPoint.y)\r\n            this._paths.forEach(child => {\r\n                startPoint = child.build(this._context, startPoint);\r\n            })\r\n        } catch (e) {\r\n            throw new ElementException('CanvasPath', this.id, e.message)\r\n        }\r\n        if (this._isClosePath) {\r\n            this._context.closePath();\r\n        }\r\n        this.drawOptions();\r\n    }\r\n\r\n    getRect(): CanvasObjectCoordinates {\r\n        return {\r\n            x: -1,\r\n            y: -1,\r\n            width: 0,\r\n            height: 0\r\n        }\r\n    }\r\n}\r\n\r\n","import { mergeWithInherits, merge } from \"../../core/functions\";\r\nimport { CanvasObjectCoordinates, ICanvasDrawable, CanvasObjectSetup, IObjectProperties, CanvasPoint, CanvasObjectSize } from \"../../core/interfaces\";\r\nimport { CanvasObjectBase } from \"./base\";\r\n\r\n/**\r\n * Creates instance of rectangle drawable\r\n */\r\nexport class Rectangle extends CanvasObjectBase<CanvasObjectCoordinates> implements ICanvasDrawable {\r\n    constructor(setup: CanvasObjectSetup<CanvasRenderingContext2D, IObjectProperties>, init?: CanvasObjectCoordinates) {\r\n        super(setup, init ?? { x: -1, y: -1, width: -1, height: -1 }, 'rect');\r\n        this._settings.isFill = true;\r\n        if (!this._objectSetup)\r\n            this._objectSetup = {\r\n                x: 0, y: 0, height: 0, width: 0\r\n            }\r\n    }\r\n\r\n    setPosition(point: CanvasPoint) {\r\n        mergeWithInherits(this._objectSetup, point)\r\n    }\r\n\r\n    setSize(size: CanvasObjectSize) {\r\n        mergeWithInherits(this._objectSetup, size)\r\n    }\r\n\r\n    draw(): void {\r\n        this.setStyles();\r\n        if (this._settings.isFill)\r\n            this._context.fillRect(this._objectSetup.x, this._objectSetup.y, this._objectSetup.width, this._objectSetup.height);\r\n        if (this._settings.isStroke)\r\n            this._context.strokeRect(this._objectSetup.x, this._objectSetup.y, this._objectSetup.width, this._objectSetup.height);\r\n    }\r\n\r\n    getRect(): CanvasObjectCoordinates {\r\n        return {\r\n            ...this._objectSetup\r\n        }\r\n    }\r\n\r\n}","import { TextSetup, ICanvasDrawable, ISetter, CanvasObjectSetup, IObjectProperties, IStringable, CanvasObjectCoordinates } from \"../../core/interfaces\";\r\nimport { CanvasObjectBase } from \"./base\";\r\n\r\n/**\r\n * Creates instance of text that will be drawn on on canvas\r\n */\r\nexport class CanvasText extends CanvasObjectBase<TextSetup> implements ICanvasDrawable, ISetter<TextSetup> {\r\n    constructor(setup: CanvasObjectSetup<CanvasRenderingContext2D, IObjectProperties>, init?: TextSetup) {\r\n        super(setup, init ?? {}, 'text');\r\n        this._settings.isFill = true;\r\n        if (!this._objectSetup) {\r\n            this._objectSetup = {};\r\n        }\r\n    }\r\n\r\n    setFont(font: IStringable) {\r\n        this._settings.font = font;\r\n        return this;\r\n    }\r\n\r\n    isValid(): boolean {\r\n        if (!this._objectSetup) {\r\n            return false;\r\n        }\r\n        if (!this._objectSetup.text || this._objectSetup.text.length === 0) {\r\n            return false;\r\n        }\r\n        if (!this._objectSetup.position) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    draw(): void {\r\n        if (!this.isValid()) {\r\n            return;\r\n        }\r\n        this.setStyles();\r\n        if (this._settings.isFill) {\r\n            //@ts-ignore all objectSetup fields were checked in isValid\r\n            this._context.fillText(this._objectSetup.text, this._objectSetup.position.x, this._objectSetup.position.y);\r\n        }\r\n        if (this._settings.isStroke) {\r\n            //@ts-ignore all objectSetup fields were checked in isValid\r\n            this._context.strokeText(this._objectSetup.text, this._objectSetup.position.x, this._objectSetup.position.y);\r\n        }\r\n    }\r\n\r\n    getRect(): CanvasObjectCoordinates {\r\n\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        }\r\n    }\r\n}","import { CanvasLinearGradientColor, CanvasSourcePattern } from \"./colors\";\r\nimport { adjustSmallRange, notFalse, merge } from \"../core/functions\";\r\nimport { CanvasPoint, InitializationError, CanvasObjectCoordinates, IObjectProperties, CanvasObjectSize, TextSetup, AssistantOptions, CanvasImageSetup, CanvasObjectSetup, CanvasPatternDefinition, IObjectStyle } from \"../core/interfaces\";\r\nimport { getMapperDefinition } from \"./mapper\";\r\nimport { IMapper } from \"../core/mapper/interfaces\";\r\nimport { CanvasImage } from \"./components/image\";\r\nimport { CanvasPath } from \"./components/path\";\r\nimport { Rectangle } from \"./components/rectangle\";\r\nimport { CanvasText } from \"./components/text\";\r\n\r\nfunction getWholeCanvasCoords(canvas: HTMLCanvasElement): CanvasObjectCoordinates {\r\n    return { x: 0, y: 0, width: canvas.width, height: canvas.height }\r\n}\r\n\r\nfunction prepareCanvasObjectSetup<T, V, K>(context: T, settings: V, mapper: IMapper<V, T>, useGlobal: boolean, setup?: K, key?: string): CanvasObjectSetup<T, V> {\r\n    return {\r\n        context,\r\n        settings,\r\n        mapper,\r\n        useGlobal,\r\n        key\r\n    }\r\n}\r\n\r\n/**\r\n * Class wrapping up Canvas context\r\n */\r\nexport class CanvasAssistant {\r\n    private _canvas: HTMLCanvasElement;\r\n    private _context: CanvasRenderingContext2D;\r\n    private _settings: IObjectProperties;\r\n    private _mapper: IMapper<IObjectProperties, CanvasRenderingContext2D>;\r\n    private _useGlobalSettingsInComponents: boolean;\r\n    constructor(options: AssistantOptions) {\r\n        this._canvas = options.canvas;\r\n        const context = this._canvas.getContext('2d', {\r\n            alpha: options.alpha,\r\n            desynchronized: options.desynchronized\r\n        });\r\n        if (!context) {\r\n            throw new InitializationError(\"Context was not initialized\")\r\n        }\r\n        this._settings = options.settings ?? {}\r\n        this._useGlobalSettingsInComponents = notFalse(options.useGlobalSettings);\r\n        this._mapper = getMapperDefinition();\r\n\r\n        this._context = context\r\n        if (options.size) {\r\n            this.setCanvasSize(options.size)\r\n        }\r\n    }\r\n\r\n    getSetupForComponent(): CanvasObjectSetup<CanvasRenderingContext2D, IObjectProperties> {\r\n        return prepareCanvasObjectSetup(this._context, this._settings, this._mapper, this._useGlobalSettingsInComponents)\r\n    }\r\n\r\n    createPath(startingPoint?: CanvasPoint) {\r\n        return new CanvasPath(this.getSetupForComponent(), startingPoint);\r\n    }\r\n\r\n    createRectangle(coordinates?: CanvasObjectCoordinates) {\r\n        return new Rectangle(this.getSetupForComponent(), coordinates);\r\n    }\r\n\r\n    createText(setup?: TextSetup) {\r\n        return new CanvasText(this.getSetupForComponent(), setup);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param setup \r\n     * @returns \r\n     */\r\n    createImage(setup?: CanvasImageSetup): CanvasImage {\r\n        return new CanvasImage(this.getSetupForComponent(), setup)\r\n    }\r\n\r\n    /**\r\n     * Sets global canvas object properties\r\n     * @param settings \r\n     */\r\n    setGlobalObjectProperties(settings: IObjectProperties) {\r\n        this._settings = merge(this._settings, settings);\r\n    }\r\n\r\n    /**\r\n     * Retrives global object properties\r\n     * @returns object properties\r\n     */\r\n    getGlobalObjectProperties(): IObjectProperties {\r\n        return this._settings;\r\n    }\r\n\r\n    /**\r\n     * Sets global alpha on context\r\n     * @param value alpha value in range 0..1 or 0...100\r\n     */\r\n    setGlobalAlpha(value: number) {\r\n        this._context.globalAlpha = adjustSmallRange(value);\r\n    }\r\n\r\n    /**\r\n     * Sets image smoothing options\r\n     * @param enabled - sets whether smoothing is enabled\r\n     * @param quality - {optional} - set smoothing quality (high, medium, low) - works only when enabled is true\r\n     */\r\n    setImageSmoothing(enabled: boolean, quality?: ImageSmoothingQuality) {\r\n        this._context.imageSmoothingEnabled = enabled;\r\n        if (quality && enabled)\r\n            this._context.imageSmoothingQuality = quality;\r\n    }\r\n\r\n    /**\r\n     * Invokes orginial getImageData\r\n     * @param coords data size and position\r\n     * @returns ImageData\r\n     */\r\n    getImageData(coords: CanvasObjectCoordinates) {\r\n        return this._context.getImageData(coords.x, coords.y, coords.width, coords.height);\r\n    }\r\n\r\n\r\n    /**\r\n     * Invokes original method putImageData with params.\r\n     * \r\n     * @param imageData - ImageData - data to put\r\n     * @param position - CanvasPoint - position where data shall be put to\r\n     * @param cutCoords - optional - coordinates of ImageData slice \r\n     */\r\n    putImageData(imageData: ImageData, position: CanvasPoint, cutCoords?: CanvasObjectCoordinates) {\r\n        if (cutCoords) {\r\n            this._context.putImageData(imageData, position.x, position.y, cutCoords.x, cutCoords.y, cutCoords.width, cutCoords.height)\r\n            return;\r\n        }\r\n        this._context.putImageData(imageData, position.x, position.y);\r\n    }\r\n\r\n    /**\r\n     * Calls original [ctx.createImageData] with size\r\n     * @param size object size\r\n     */\r\n    createImageData(width: number | ImageData, height?: number) {\r\n        if (typeof width === 'number') {\r\n            this._context.createImageData(width, height ?? 0);\r\n            return;\r\n        }\r\n        this._context.createImageData(width);\r\n    }\r\n\r\n    /**\r\n     * Saves context settings\r\n     */\r\n    save() {\r\n        this._context.save();\r\n    }\r\n\r\n    /**\r\n     * Restores previously saved context settings\r\n     */\r\n    restore() {\r\n        this._context.restore();\r\n    }\r\n\r\n    setCanvasSize(size: CanvasObjectSize) {\r\n        this._canvas.width = size.width;\r\n        this._canvas.height = size.height;\r\n    }\r\n\r\n    getCanvasSize(): CanvasObjectSize {\r\n        return {\r\n            width: this._canvas.width,\r\n            height: this._canvas.height\r\n        }\r\n    }\r\n\r\n    getContext(): CanvasRenderingContext2D {\r\n        return this._context;\r\n    }\r\n\r\n    createLinearGradient(options?: CanvasObjectCoordinates): CanvasLinearGradientColor {\r\n        return new CanvasLinearGradientColor(this._context, options);\r\n    }\r\n\r\n    createPattern(options?: CanvasPatternDefinition): CanvasSourcePattern {\r\n        return new CanvasSourcePattern(this._context, options);\r\n    }\r\n\r\n    clear(coords?: CanvasObjectCoordinates) {\r\n        let co = coords ?? getWholeCanvasCoords(this._canvas)\r\n        this._context.clearRect(co.x, co.y, co.width, co.height);\r\n    }\r\n}","import { merge, validator } from \"../core/functions\";\r\nimport { ArcOptions, BezierCurveOptions, CanvasPoint, CurveOptions, ElementException, EllipseOptions, IGetter, IIdentifyable, IKey, IPathElement, ISetter, PathElementOptions, QuadraticCurveOptions } from \"../core/interfaces\";\r\nimport { angle360, createKey, } from \"./statics\";\r\n\r\n\r\nfunction parseOptions<T>(input: PathElementOptions<T> | T | string | undefined): PathElementOptions<T> {\r\n    if (!input) {\r\n        return {\r\n            key: undefined,\r\n            init: undefined\r\n        }\r\n    }\r\n    if (typeof input === 'string') {\r\n        return {\r\n            key: input,\r\n            init: undefined\r\n        }\r\n    }\r\n    if ((<any>input)['init']) {\r\n        return {\r\n            init: (<any>input)['init'],\r\n            key: (<any>input)['key']\r\n        }\r\n    }\r\n    return {\r\n        key: undefined,\r\n        init: <any>input\r\n    }\r\n}\r\n\r\nclass PathElementBase<T> implements IIdentifyable, IKey<string>, ISetter<T> {\r\n    id: string;\r\n    name: string;\r\n    data: T;\r\n    constructor(name: string, counter: string, init: T, key?: string) {\r\n        this.id = key ?? createKey(counter);\r\n        this.name = name;\r\n        this.data = init;\r\n    }\r\n\r\n    /**\r\n     * Retrvies an id of the path element\r\n     * @returns key of the element \r\n     */\r\n    getKey(): string {\r\n        return this.id;\r\n    }\r\n\r\n    /**\r\n     * Sets setup data of the element\r\n     * @param data \r\n     * @returns \r\n     */\r\n    set(data: T) {\r\n        this.data = merge(this.data, data);\r\n        return this;\r\n    }\r\n\r\n    throw(message: string) {\r\n        throw new ElementException(this.name, this.id, message)\r\n    }\r\n\r\n    validateKeys(keys: (keyof T)[]): boolean {\r\n        return validator(this.data, keys, (objectName: string, objectType: string, value: any) => {\r\n            if (objectType === 'undefined') {\r\n                this.throw(`[${objectName}] not defined`);\r\n            }\r\n            if (objectType === 'number' && value < 0) {\r\n                this.throw(`[${objectName}] is not correct`);\r\n            }\r\n            return true;\r\n        })\r\n    }\r\n}\r\n\r\nclass DataBase<T> implements IGetter<T> {\r\n    protected _data: T;\r\n    constructor(init: T) {\r\n        this._data = init;\r\n    }\r\n\r\n    get(): T {\r\n        return this._data;\r\n    }\r\n}\r\n\r\nexport class LineData extends DataBase<CanvasPoint[]>  {\r\n    constructor(...points: CanvasPoint[]) {\r\n        super([...points])\r\n    }\r\n\r\n    to(...points: CanvasPoint[]) {\r\n        this._data.push(...points);\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class Line extends PathElementBase<CanvasPoint[]> implements IPathElement {\r\n    constructor(options: PathElementOptions<CanvasPoint[]> | CanvasPoint[] | string | undefined) {\r\n        const { init, key } = parseOptions(options)\r\n        super(\"Line\", 'line', init ?? [], key);\r\n    }\r\n\r\n    set(data: CanvasPoint[]) {\r\n        this.data = [...data];\r\n        return this;\r\n    }\r\n\r\n    build(context: CanvasRenderingContext2D, from: CanvasPoint): CanvasPoint {\r\n        if (this.data.length === 0) {\r\n            this.throw(\"There are no lines to draw\");\r\n        }\r\n        let last = this.data[0];\r\n        this.data.forEach(point => {\r\n            context.lineTo(point.x, point.y)\r\n            last = point;\r\n        })\r\n\r\n        return {\r\n            ...last\r\n        }\r\n    }\r\n}\r\n\r\nexport class CurveData extends DataBase<CurveOptions> {\r\n    constructor(data?: CurveOptions) {\r\n        super(data ?? {});\r\n    }\r\n\r\n    to(point: CanvasPoint) {\r\n        this._data.end = point;\r\n        return this;\r\n    }\r\n\r\n    corner(point: CanvasPoint) {\r\n        this._data.corner = point;\r\n        return this;\r\n    }\r\n\r\n    withRadius(value: number) {\r\n        this._data.radius = value;\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates curved line\r\n */\r\nexport class Curve extends PathElementBase<CurveOptions> implements IPathElement {\r\n    constructor(options: PathElementOptions<CurveOptions> | CurveOptions | string | undefined) {\r\n        const { init, key } = parseOptions<CurveOptions>(options);\r\n        super(\"Curve\", 'curve', init ?? {}, key)\r\n    }\r\n\r\n    build(context: CanvasRenderingContext2D, from: CanvasPoint): CanvasPoint {\r\n        if (this.validateKeys(['corner', 'end', 'radius'])) {\r\n            //@ts-ignore end must be defined\r\n            context.arcTo(this.data.corner.x, this.data.corner.y, this.data.end.x, this.data.end.y, this.data.radius);\r\n            //@ts-ignore end must be defined\r\n            context.lineTo(this.data.end.x, this.data.end.y)\r\n        }\r\n        //@ts-ignore end must be defined\r\n        return {\r\n            ...this.data.end\r\n        }\r\n    }\r\n}\r\n\r\nexport class ArcData extends DataBase<ArcOptions> {\r\n    constructor(data?: ArcOptions) {\r\n        super(data ?? {\r\n            startAngle: -1,\r\n            endAngle: -1,\r\n            radius: -1\r\n        })\r\n    }\r\n\r\n    setStartAngle(value: number) {\r\n        this._data.startAngle = value;\r\n        return this;\r\n    }\r\n\r\n    setEndAngle(value: number) {\r\n        this._data.endAngle = value;\r\n        return this;\r\n    }\r\n\r\n    setRadius(value: number) {\r\n        this._data.radius = value;\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class Arc extends PathElementBase<ArcOptions> implements IPathElement {\r\n    constructor(settings: PathElementOptions<ArcOptions> | ArcOptions | string | undefined) {\r\n        const { init, key } = parseOptions(settings)\r\n        super(\"Arc\", 'curve', init ?? {\r\n            startAngle: -1,\r\n            endAngle: -1,\r\n            radius: -1\r\n        }, key);\r\n\r\n    }\r\n\r\n    build(context: CanvasRenderingContext2D, from: CanvasPoint): CanvasPoint {\r\n        if (this.validateKeys(['endAngle', 'startAngle', 'radius'])) {\r\n            context.arc(from.x, from.y, this.data.radius, this.data.startAngle, this.data.endAngle);\r\n        }\r\n\r\n        return {\r\n            ...from\r\n        }\r\n    }\r\n}\r\n\r\nexport class BezierCurveData extends DataBase<BezierCurveOptions> {\r\n    constructor(init?: BezierCurveOptions) {\r\n        super(init ?? {})\r\n    }\r\n\r\n    to(point: CanvasPoint) {\r\n        this._data.end = point;\r\n        return this;\r\n    }\r\n\r\n    by(point1: CanvasPoint, point2: CanvasPoint) {\r\n        this._data.controlPoint = point1;\r\n        this._data.controlPoint2 = point2;\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class BezierCurve extends PathElementBase<BezierCurveOptions> implements IPathElement {\r\n    constructor(options: PathElementOptions<BezierCurveOptions> | BezierCurveOptions | string | undefined) {\r\n        const { init, key } = parseOptions(options)\r\n        super(\"BezierCurve\", 'curve', init ?? {}, key);\r\n    }\r\n\r\n    build(context: CanvasRenderingContext2D, from: CanvasPoint): CanvasPoint {\r\n        if (this.validateKeys(['controlPoint2', 'controlPoint', 'end'])) {\r\n            //@ts-ignore end must be defined\r\n            context.bezierCurveTo(this.data.controlPoint.x, this.data.controlPoint.y, this.data.controlPoint2.x, this.data.controlPoint2.y, this.data.end.x, this.data.end.y);\r\n        }\r\n\r\n\r\n        //@ts-ignore end must be defined\r\n        return {\r\n            ...this.data.end\r\n        }\r\n    }\r\n}\r\n\r\nexport class QuadraticCurveData extends DataBase<QuadraticCurveOptions> {\r\n    constructor(init?: QuadraticCurveOptions) {\r\n        super(init ?? {})\r\n    }\r\n\r\n    to(point: CanvasPoint) {\r\n        this._data.end = point;\r\n        return this;\r\n    }\r\n\r\n    by(point: CanvasPoint) {\r\n        this._data.controlPoint = point;\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class QuadraticCurve extends PathElementBase<QuadraticCurveOptions> implements IPathElement {\r\n    constructor(options: PathElementOptions<QuadraticCurveOptions> | QuadraticCurveOptions | string | undefined) {\r\n        const { init, key } = parseOptions(options)\r\n        super(\"QuadraticCurve\", 'curve', init ?? {}, key);\r\n    }\r\n\r\n    build(context: CanvasRenderingContext2D, from: CanvasPoint): CanvasPoint {\r\n        if (this.validateKeys(['controlPoint', 'end'])) {\r\n            //@ts-ignore end must be defined\r\n            context.quadraticCurveTo(this.data.controlPoint.x, this.data.controlPoint.y, this.data.end.x, this.data.end.y);\r\n        }\r\n\r\n        //@ts-ignore end must be defined\r\n        return {\r\n            ...this.data.end\r\n        }\r\n    }\r\n}\r\n\r\nexport class EllipseData extends DataBase<EllipseOptions> {\r\n    constructor(init?: EllipseOptions) {\r\n        super(init ?? {\r\n            rotation: 0,\r\n            startAngle: 0,\r\n            endAngle: angle360\r\n        });\r\n    }\r\n\r\n    setRadius(x: number, y?: number) {\r\n        this._data.radiusX = x;\r\n        this._data.radiusY = y ?? x;\r\n        return this;\r\n\r\n    }\r\n\r\n    setAngles(start: number, end: number) {\r\n        this._data.startAngle = start;\r\n        this._data.endAngle = end;\r\n        return this;\r\n    }\r\n\r\n    setRotation(rotation: number) {\r\n        this._data.rotation = rotation\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\nexport class Ellipse extends PathElementBase<EllipseOptions> implements IPathElement {\r\n    constructor(options: PathElementOptions<EllipseOptions> | EllipseOptions | string | undefined) {\r\n        const { init, key } = parseOptions(options)\r\n        super(\"Ellipse\", 'ellipse', init ?? {}, key);\r\n    }\r\n\r\n    build(context: CanvasRenderingContext2D, from: CanvasPoint): CanvasPoint {\r\n        if (this.validateKeys(['startAngle', 'endAngle', \"radiusX\", 'radiusY', 'rotation'])) {\r\n            //@ts-ignore props must be defined\r\n            context.ellipse(from.x, from.y, this.data.radiusX, this.data.radiusY, this.data.rotation, this.data.startAngle, this.data.endAngle);\r\n        }\r\n        return {\r\n            ...from\r\n        }\r\n    }\r\n}\r\n","import { merge } from \"../core/functions\";\r\nimport { IGetter, IObjectProperties, IObjectStyle, IStringable, LineCap, LineJoin, TextAlign, TextBaseline } from \"../core/interfaces\";\r\n\r\nexport interface IObjectPropertiesHelper {\r\n    set(properties: IObjectProperties): IObjectPropertiesHelper;\r\n    setFillStyle(color: IObjectStyle): IObjectPropertiesHelper;\r\n    setStrokeStyle(color: IObjectStyle): IObjectPropertiesHelper;\r\n    setShadowColor(color: IObjectStyle): IObjectPropertiesHelper;\r\n    setShadow(color: IObjectStyle, offsetX: number, offsetY: number, blur?: number): IObjectPropertiesHelper;\r\n    setFont(font: IStringable): IObjectPropertiesHelper;\r\n    setText(font: IStringable, textAlign: TextAlign, textBaseline: TextBaseline): IObjectPropertiesHelper;\r\n    setStrokeWidth(value: number): IObjectPropertiesHelper;\r\n    setStroke(width?: number, lineJoin?: LineJoin, lineCap?: LineCap, lineDash?: number[], dashOffset?: number, mitterLimit?: number): IObjectPropertiesHelper;\r\n    setStrokeDash(dash: number[], offset?: number): IObjectPropertiesHelper;\r\n    setStrokeDetails(lineJoin: LineJoin, lineCap: LineCap, mitterLimit?: number): IObjectPropertiesHelper;\r\n}\r\n\r\nexport class ObjectProperties implements IObjectPropertiesHelper, IGetter<IObjectProperties> {\r\n    private _instance: IObjectProperties;\r\n    constructor(properties?: IObjectProperties) {\r\n        this._instance = {};\r\n        if (properties) {\r\n            this.set(properties);\r\n        }\r\n    }\r\n\r\n    set(properties: IObjectProperties) {\r\n        this._instance = merge(this._instance, properties);\r\n        return this;\r\n    }\r\n\r\n    setFillStyle(style: IObjectStyle) {\r\n        this._instance.fillStyle = style;\r\n        return this;\r\n    }\r\n\r\n    setStrokeStyle(style: IObjectStyle) {\r\n        this._instance.strokeStyle = style;\r\n        return this;\r\n    }\r\n\r\n    setShadowColor(color: IObjectStyle) {\r\n        this._instance.shadowColor = color\r\n        return this;\r\n    }\r\n\r\n    setShadow(color: IObjectStyle, offsetX: number, offsetY: number, blur?: number) {\r\n        return this.set({\r\n            shadowColor: color,\r\n            shadowOffsetX: offsetX,\r\n            shadowOffsetY: offsetY,\r\n            shadowBlur: blur\r\n        })\r\n    }\r\n\r\n    setFont(font: IStringable) {\r\n        this._instance.font = font\r\n        return this;\r\n    }\r\n\r\n    setText(font: IStringable, textAlign: TextAlign, textBaseline: TextBaseline) {\r\n        return this.set({\r\n            font,\r\n            textAlign,\r\n            textBaseline\r\n        });\r\n    }\r\n\r\n    setStrokeWidth(value: number) {\r\n        this._instance.strokeWidth = value;\r\n        return this;\r\n    }\r\n\r\n    setStroke(width?: number, lineJoin?: LineJoin, lineCap?: LineCap, lineDash?: number[], dashOffset?: number, mitterLimit?: number) {\r\n        return this.set({\r\n            strokeWidth: width,\r\n            lineDashOffset: dashOffset,\r\n            lineJoin,\r\n            lineCap,\r\n            lineDash,\r\n\r\n        })\r\n    }\r\n\r\n    setStrokeDash(dash: number[], offset?: number) {\r\n        this._instance.lineDash = dash;\r\n        if (offset)\r\n            this._instance.lineDashOffset = offset;\r\n        return this;\r\n    }\r\n\r\n    setStrokeDetails(lineJoin: LineJoin, lineCap: LineCap, mitterLimit?: number) {\r\n        return this.set({\r\n            lineJoin,\r\n            lineCap,\r\n            mitterLimit\r\n        });\r\n    }\r\n\r\n    get(): IObjectProperties {\r\n        return this._instance;\r\n    }\r\n}","import { merge } from \"./functions\";\r\nimport { ISetter, IStringable } from \"./interfaces\";\r\n\r\nexport interface FontSetup {\r\n    style?: 'italic' | \"normal\";\r\n    size?: number;\r\n    unit?: string;\r\n    type?: string;\r\n}\r\n\r\nexport class Font implements IStringable, ISetter<FontSetup> {\r\n    private _setup: FontSetup;\r\n    constructor(setup?: FontSetup) {\r\n        this._setup = {\r\n            unit: 'px'\r\n        };\r\n        if (setup) {\r\n            this.set(setup)\r\n        }\r\n    }\r\n\r\n    set(setup: FontSetup): Font {\r\n        this._setup = merge(this._setup, setup);\r\n        return this;\r\n    }\r\n\r\n    setType(type: string) {\r\n        this._setup.type = type;\r\n        return this;\r\n    }\r\n\r\n    setSize(value: number) {\r\n        this._setup.size = value;\r\n        return this;\r\n    }\r\n\r\n    setUnit(value: string) {\r\n        this._setup.unit = value;\r\n        return this;\r\n    }\r\n\r\n    setStyle(style: 'normal' | 'italic') {\r\n        this._setup.style = style;\r\n        return this;\r\n    }\r\n\r\n    asString(): string {\r\n        let result = [];\r\n        if (this._setup.style) {\r\n            result.push(this._setup.style)\r\n        }\r\n        if (this._setup.size) {\r\n            result.push((this._setup.size + (this._setup.unit ?? '')))\r\n        }\r\n        if (this._setup.type) {\r\n            result.push(this._setup.type)\r\n        }\r\n\r\n        return result.join(' ');\r\n    }\r\n\r\n}","export * from './impl/colors';\r\nexport * from './impl/assistant';\r\nexport * from './impl/paths';\r\nexport * from './impl/properties';\r\nexport * from './core/font';\r\nexport * from './impl/components/image';\r\nexport * from './impl/components/rectangle';\r\nexport * from './impl/components/path';\r\nexport * from './impl/components/text';"],"sourceRoot":""}